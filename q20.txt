CREATE PROCEDURE MYPR
AS
BEGIN
 CREATE TABLE STORAGE ( PROJNO NUMBER(6),
    NUMEMPLOYEESASSIGNED NUMBER(8));

    INSERT INTO STORAGE (PROJNO, NUMEMPLOYEESASSIGNED) 
    SELECT PRO, TEMPNUM FROM (SELECT PROJNO AS PRO, COUNT(*) AS TEMPNUM FROM ASSIGN GROUP BY PROJNO ORDER BY PROJNO);

    UPDATE PROJECT PJ 
    SET PJ.NUMEMPLOYEESASSIGNED = 
        (SELECT STR.NUMEMPLOYEESASSIGNED 
        FROM STORAGE STR 
        WHERE PJ.PROJNO = STR.PROJNO);

    DROP TABLE STORAGE;
END;    

CREATE TRIGGER SHOOT AFTER UPDATE OR INSERT OR DELETE ON ASSIGN FOR EACH ROW
BEGIN
   MYPR;
END;

UPDATE ASSIGN SET PROJNO = '1005' WHERE PROJNAME = '1001' ;
COMMIT;